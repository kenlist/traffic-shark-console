var data = [
  {
    "time": "9/1",
    "price": 10,
    "name": "商品A"
  },
  {
    "time": "9/1",
    "price": 30,
    "name": "商品B"
  },
  {
    "time": "9/2",
    "price": 12,
    "name": "商品A"
  },
  {
    "time": "9/2",
    "price": 32,
    "name": "商品B"
  },
  {
    "time": "9/3",
    "price": 11,
    "name": "商品A"
  },
  {
    "time": "9/3",
    "price": 35,
    "name": "商品B"
  },
  {
    "time": "9/4",
    "price": 15,
    "name": "商品A"
  },
  {
    "time": "9/4",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/5",
    "price": 20,
    "name": "商品A"
  },
  {
    "time": "9/5",
    "price": 42,
    "name": "商品B"
  },
  {
    "time": "9/6",
    "price": 22,
    "name": "商品A"
  },
  {
    "time": "9/6",
    "price": 35,
    "name": "商品B"
  },
  {
    "time": "9/7",
    "price": 21,
    "name": "商品A"
  },
  {
    "time": "9/7",
    "price": 36,
    "name": "商品B"
  },
  {
    "time": "9/8",
    "price": 25,
    "name": "商品A"
  },
  {
    "time": "9/8",
    "price": 31,
    "name": "商品B"
  },
  {
    "time": "9/9",
    "price": 31,
    "name": "商品A"
  },
  {
    "time": "9/9",
    "price": 35,
    "name": "商品B"
  },
  {
    "time": "9/10",
    "price": 32,
    "name": "商品A"
  },
  {
    "time": "9/10",
    "price": 36,
    "name": "商品B"
  },
  {
    "time": "9/11",
    "price": 28,
    "name": "商品A"
  },
  {
    "time": "9/11",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/12",
    "price": 29,
    "name": "商品A"
  },
  {
    "time": "9/12",
    "price": 42,
    "name": "商品B"
  },
  {
    "time": "9/13",
    "price": 40,
    "name": "商品A"
  },
  {
    "time": "9/13",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/14",
    "price": 41,
    "name": "商品A"
  },
  {
    "time": "9/14",
    "price": 38,
    "name": "商品B"
  },
  {
    "time": "9/15",
    "price": 45,
    "name": "商品A"
  },
  {
    "time": "9/15",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/16",
    "price": 50,
    "name": "商品A"
  },
  {
    "time": "9/16",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/17",
    "price": 65,
    "name": "商品A"
  },
  {
    "time": "9/17",
    "price": 38,
    "name": "商品B"
  },
  {
    "time": "9/18",
    "price": 45,
    "name": "商品A"
  },
  {
    "time": "9/18",
    "price": 36,
    "name": "商品B"
  },
  {
    "time": "9/19",
    "price": 50,
    "name": "商品A"
  },
  {
    "time": "9/19",
    "price": 30,
    "name": "商品B"
  },
  {
    "time": "9/20",
    "price": 51,
    "name": "商品A"
  },
  {
    "time": "9/20",
    "price": 29,
    "name": "商品B"
  },
  {
    "time": "9/21",
    "price": 65,
    "name": "商品A"
  },
  {
    "time": "9/21",
    "price": 28,
    "name": "商品B"
  },
  {
    "time": "9/22",
    "price": 60,
    "name": "商品A"
  },
  {
    "time": "9/22",
    "price": 25,
    "name": "商品B"
  },
  {
    "time": "9/23",
    "price": 62,
    "name": "商品A"
  },
  {
    "time": "9/23",
    "price": 28,
    "name": "商品B"
  },
  {
    "time": "9/24",
    "price": 65,
    "name": "商品A"
  },
  {
    "time": "9/24",
    "price": 29,
    "name": "商品B"
  },
  {
    "time": "9/25",
    "price": 45,
    "name": "商品A"
  },
  {
    "time": "9/25",
    "price": 30,
    "name": "商品B"
  },
  {
    "time": "9/26",
    "price": 55,
    "name": "商品A"
  },
  {
    "time": "9/26",
    "price": 40,
    "name": "商品B"
  },
  {
    "time": "9/27",
    "price": 59,
    "name": "商品A"
  },
  {
    "time": "9/27",
    "price": 32,
    "name": "商品B"
  },
  {
    "time": "9/28",
    "price": 52,
    "name": "商品A"
  },
  {
    "time": "9/28",
    "price": 33,
    "name": "商品B"
  },
  {
    "time": "9/29",
    "price": 53,
    "name": "商品A"
  },
  {
    "time": "9/29",
    "price": 34,
    "name": "商品B"
  },
  {
    "time": "9/30",
    "price": 40,
    "name": "商品A"
  },
  {
    "time": "9/30",
    "price": 30,
    "name": "商品B"
  },
  {
    "time": "9/31",
    "price": 45,
    "name": "商品A"
  },
  {
    "time": "9/31",
    "price": 35,
    "name": "商品B"
  }
];

class HigherChart extends React.Component {
  constructor(props, ...others) {
    super(props, ...others);
    this.Chart = createG2(chart => {
      this.chart = chart;
      chart.line().position('time*price').color('name').shape(props.shape).size(2);
      chart.render();
    });
  }

  componentWillReceiveProps(nextProps) {
    if (nextProps.shape !== this.props.shape) {
      this.chart.clear();
      this.chart.line().position('time*price').color('name').shape(nextProps.shape).size(2);
      this.chart.render();
    }
  }

  render() {
    return (<this.Chart {...this.props} />);
  }
}

class TrafficCaptureGeneralTab extends React.Component {
  state = {
    shape: 'spline',
    data: data.slice(0, data.length / 2 - 1),
    width: 500,
    height: 250,
    plotCfg: {
      margin: [10, 100, 50, 120],
    },
  }
  changeHandler = () => {
    this.setState({
      shape: 'line',
    });
  }
  render() {
    return <div>
      <HigherChart
        shape={this.state.shape}
        data={this.state.data}
        width={this.state.width}
        height={this.state.height}
        plotCfg={this.state.plotCfg}
      />
      <button onClick={this.changeHandler}>Change shape</button>
    </div>
  }
}
